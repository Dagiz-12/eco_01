<!-- templates/products/product_detail.html -->
{% extends 'base.html' %} {% load static %} {% block title %}{{ product.name }}
- HagerBet{% endblock %} {% block content %}
<div class="container mx-auto px-4 py-8">
  <div class="bg-white rounded-lg shadow-lg overflow-hidden">
    <div class="grid grid-cols-1 lg:grid-cols-2 gap-8 p-8">
      <!-- Product Images -->
      <div>
        <div class="mb-4">
          <img
            src="{% if product.primary_image %}{{ product.primary_image.url }}{% else %}{% static 'images/placeholder.jpg' %}{% endif %}"
            alt="{{ product.name }}"
            class="w-full h-96 object-cover rounded-lg"
            id="main-product-image"
          />
        </div>
        <div class="grid grid-cols-4 gap-2">
          {% for image in product.images.all %}
          <img
            src="{{ image.image.url }}"
            alt="{{ image.alt_text }}"
            class="w-20 h-20 object-cover rounded cursor-pointer border-2 hover:border-blue-500"
            onclick="document.getElementById('main-product-image').src = this.src"
          />
          {% endfor %}
        </div>
      </div>

      <!-- Product Details -->
      <div>
        <h1 class="text-3xl font-bold text-gray-800 mb-4">
          {{ product.name }}
        </h1>

        <div class="flex items-center mb-4">
          <div class="text-yellow-400 text-lg">★★★★☆</div>
          <span class="text-gray-600 ml-2"
            >({{ product.review_count }} reviews)</span
          >
        </div>

        <div class="price-section mb-6">
          <span class="text-4xl font-bold text-green-600"
            >${{ product.price }}</span
          >
          {% if product.compare_price and product.compare_price > product.price
          %}
          <div class="flex items-center space-x-2 mt-2">
            <span class="text-xl text-gray-500 line-through"
              >${{ product.compare_price }}</span
            >
            <span class="bg-red-500 text-white px-2 py-1 rounded text-sm">
              Save {{ product.discount_percentage }}%
            </span>
          </div>
          {% endif %}
        </div>

        <div class="mb-6">
          <p class="text-gray-700">{{ product.description }}</p>
        </div>

        <!-- Variants -->
        {% if product.variants.all %}
        <div class="mb-6">
          <label class="block text-sm font-medium text-gray-700 mb-2"
            >Options:</label
          >
          <select
            class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"
          >
            {% for variant in product.variants.all %}
            <option
              value="{{ variant.id }}"
              {%
              if
              not
              variant.is_in_stock
              %}disabled{%
              endif
              %}
            >
              {{ variant.name }} - ${{ variant.price }} {% if not
              variant.is_in_stock %}(Out of Stock){% endif %}
            </option>
            {% endfor %}
          </select>
        </div>
        {% endif %}

        <!-- Quantity and Add to Cart -->
        <div class="mb-6">
          <label class="block text-sm font-medium text-gray-700 mb-2"
            >Quantity:</label
          >
          <div class="flex items-center space-x-4">
            <div class="flex items-center border border-gray-300 rounded-lg">
              <button
                class="decrease-qty px-4 py-2 text-gray-600 hover:bg-gray-100"
              >
                -
              </button>
              <input
                type="number"
                value="1"
                min="1"
                max="{{ product.quantity }}"
                class="quantity-input w-16 text-center border-0 focus:ring-0"
              />
              <button
                class="increase-qty px-4 py-2 text-gray-600 hover:bg-gray-100"
              >
                +
              </button>
            </div>
            <span class="text-sm text-gray-500">
              {{ product.quantity }} available
            </span>
          </div>
        </div>

        <!-- Action Buttons -->
        <div class="flex space-x-4 mb-6">
          <button
            class="add-to-cart-btn flex-1 bg-blue-600 text-white py-3 px-6 rounded-lg hover:bg-blue-700 transition-colors font-semibold text-lg"
            data-product-id="{{ product.id }}"
            {%
            if
            not
            product.is_in_stock
            %}disabled{%
            endif
            %}
          >
            <i class="fas fa-shopping-cart mr-2"></i>
            {% if product.is_in_stock %}Add to Cart{% else %}Out of Stock{%
            endif %}
          </button>
          <button
            class="wishlist-toggle-btn bg-gray-200 text-gray-700 p-3 rounded-lg hover:bg-gray-300 transition-colors"
            data-product-id="{{ product.id }}"
          >
            <i class="far fa-heart text-xl"></i>
          </button>
        </div>

        <!-- Product Meta -->
        <div class="border-t border-gray-200 pt-6">
          <div class="grid grid-cols-2 gap-4 text-sm text-gray-600">
            <div><span class="font-medium">SKU:</span> {{ product.sku }}</div>
            <div>
              <span class="font-medium">Category:</span>
              <a
                href="{% url 'products:category_detail' product.category.slug %}"
                class="text-blue-600 hover:underline"
              >
                {{ product.category.name }}
              </a>
            </div>
            <div>
              <span class="font-medium">Brand:</span> {{ product.brand.name }}
            </div>
            <div>
              <span class="font-medium">Availability:</span>
              {% if product.is_in_stock %}
              <span class="text-green-600">In Stock</span>
              {% else %}
              <span class="text-red-600">Out of Stock</span>
              {% endif %}
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
{% endblock %} {% block extra_js %}
<script src="{% static 'js/products.js' %}"></script>
{% endblock %}
