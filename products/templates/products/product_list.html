{% extends 'base.html' %} {% load static %} {% block title %}Products -
HagerBet{% endblock %} {% block content %}
<div class="max-w-7xl mx-auto px-4 py-8">
  <!-- Header -->
  <div class="mb-8">
    <h1 class="text-3xl font-bold text-gray-900 mb-2">Our Products</h1>
    <p class="text-gray-600">Discover our amazing collection of products</p>
  </div>

  <div class="grid grid-cols-1 lg:grid-cols-4 gap-8">
    <!-- Sidebar Filters -->
    <div class="lg:col-span-1">
      <div class="bg-white rounded-lg shadow-md p-6 sticky top-4">
        <!-- Search -->
        <form id="product-search-form" class="mb-6">
          <div class="form-group">
            <label class="form-label">Search Products</label>
            <div class="relative">
              <input
                type="text"
                name="q"
                placeholder="Search..."
                class="form-input pr-10"
              />
              <button
                type="submit"
                class="absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600"
              >
                <i class="fas fa-search"></i>
              </button>
            </div>
          </div>
        </form>

        <!-- Categories Filter -->
        <div class="mb-6">
          <h3 class="font-semibold text-lg mb-3">Categories</h3>
          <div class="space-y-2">
            {% for category in categories %}
            <label class="flex items-center">
              <input
                type="checkbox"
                name="category"
                value="{{ category.id }}"
                class="product-filter rounded border-gray-300 text-blue-600 focus:ring-blue-500"
              />
              <span class="ml-2 text-sm text-gray-700"
                >{{ category.name }}</span
              >
              <span class="ml-auto text-xs text-gray-500"
                >({{ category.product_count }})</span
              >
            </label>
            {% endfor %}
          </div>
        </div>

        <!-- Price Range -->
        <div class="mb-6">
          <h3 class="font-semibold text-lg mb-3">Price Range</h3>
          <div class="space-y-2">
            <label class="flex items-center">
              <input
                type="radio"
                name="price_range"
                value="0-50"
                class="product-filter rounded-full border-gray-300 text-blue-600 focus:ring-blue-500"
              />
              <span class="ml-2 text-sm text-gray-700">Under $50</span>
            </label>
            <label class="flex items-center">
              <input
                type="radio"
                name="price_range"
                value="50-100"
                class="product-filter rounded-full border-gray-300 text-blue-600 focus:ring-blue-500"
              />
              <span class="ml-2 text-sm text-gray-700">$50 - $100</span>
            </label>
            <label class="flex items-center">
              <input
                type="radio"
                name="price_range"
                value="100-200"
                class="product-filter rounded-full border-gray-300 text-blue-600 focus:ring-blue-500"
              />
              <span class="ml-2 text-sm text-gray-700">$100 - $200</span>
            </label>
            <label class="flex items-center">
              <input
                type="radio"
                name="price_range"
                value="200+"
                class="product-filter rounded-full border-gray-300 text-blue-600 focus:ring-blue-500"
              />
              <span class="ml-2 text-sm text-gray-700">Over $200</span>
            </label>
          </div>
        </div>

        <!-- Brands Filter -->
        <div class="mb-6">
          <h3 class="font-semibold text-lg mb-3">Brands</h3>
          <div class="space-y-2 max-h-48 overflow-y-auto custom-scrollbar">
            {% for brand in brands %}
            <label class="flex items-center">
              <input
                type="checkbox"
                name="brand"
                value="{{ brand.id }}"
                class="product-filter rounded border-gray-300 text-blue-600 focus:ring-blue-500"
              />
              <span class="ml-2 text-sm text-gray-700">{{ brand.name }}</span>
            </label>
            {% endfor %}
          </div>
        </div>

        <!-- Clear Filters -->
        <button id="clear-filters" class="w-full btn-outline text-sm">
          <i class="fas fa-times mr-2"></i>Clear All Filters
        </button>
      </div>
    </div>

    <!-- Products Grid -->
    <div class="lg:col-span-3">
      <!-- Toolbar -->
      <div class="bg-white rounded-lg shadow-md p-4 mb-6">
        <div
          class="flex flex-col sm:flex-row justify-between items-center space-y-3 sm:space-y-0"
        >
          <div class="text-sm text-gray-600">
            Showing <span id="products-count">0</span> products
          </div>

          <div class="flex items-center space-x-4">
            <label class="text-sm text-gray-700">Sort by:</label>
            <select id="product-sort" class="form-select text-sm w-48">
              <option value="name">Name (A-Z)</option>
              <option value="-name">Name (Z-A)</option>
              <option value="price">Price (Low to High)</option>
              <option value="-price">Price (High to Low)</option>
              <option value="-created_at">Newest First</option>
              <option value="-average_rating">Highest Rated</option>
            </select>
          </div>
        </div>
      </div>

      <!-- Products Container -->
      <div id="products-loading" class="text-center py-8 hidden">
        <div class="spinner mx-auto h-8 w-8 border-b-2 border-blue-600"></div>
        <p class="mt-2 text-gray-600">Loading products...</p>
      </div>

      <div
        id="products-container"
        class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6 mb-8"
      >
        <!-- Products will be loaded here via AJAX -->
      </div>

      <!-- Pagination -->
      <div id="products-pagination" class="flex justify-center">
        <!-- Pagination will be loaded here -->
      </div>

      <!-- Load More Sentinel -->
      <div id="load-more-sentinel" class="h-10"></div>
    </div>
  </div>
</div>

<!-- Quick View Modal -->
<div
  id="quick-view-modal"
  class="fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4 hidden"
>
  <!-- Modal content loaded via JavaScript -->
</div>
{% endblock %} {% block extra_js %}
<script src="{% static 'js/products.js' %}"></script>
<script>
  // Clear filters functionality
  document
    .getElementById("clear-filters")
    .addEventListener("click", function () {
      // Clear all filter inputs
      document.querySelectorAll(".product-filter").forEach((filter) => {
        if (filter.type === "checkbox" || filter.type === "radio") {
          filter.checked = false;
        } else {
          filter.value = "";
        }
      });

      // Reset filters and reload products
      productManager.filters = {};
      productManager.currentPage = 1;
      productManager.loadProducts();
    });
</script>
{% endblock %}
